(this.webpackJsonpsurvey=this.webpackJsonpsurvey||[]).push([[0],{234:function(e,t,n){e.exports=n(438)},240:function(e,t,n){},438:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(90),l=n.n(s),o=(n(239),n(240),n(46)),i=n(47),u=n(50),c=n(49),m=n(65),p=n(448),d=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={activeItem:"home"},e.handleItemClick=function(t,n){var a=n.name;e.setState({activeItem:a})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.state.activeItem;return r.a.createElement(p.a,{secondary:!0},r.a.createElement(p.a.Item,{name:"Survey",className:"title"}),r.a.createElement(p.a.Item,{as:m.b,to:"/",name:"home",active:"home"===e,onClick:this.handleItemClick}),r.a.createElement(p.a.Item,{as:m.b,to:"/signIn",name:"signIn",active:"signIn"===e,onClick:this.handleItemClick}))}}]),n}(a.Component);function E(e){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:e.formSubmissionHandler},r.a.createElement("label",{htmlFor:"name"},"Name: "),r.a.createElement("input",{type:"text",name:"name",className:"form-control",required:!0}),r.a.createElement("label",{htmlFor:"question1"},"Question: 1 "),r.a.createElement("input",{type:"text",name:"question1",className:"form-control",required:!0}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"question2"},"Question 2: "),r.a.createElement("input",{type:"text",name:"question2",className:"form-control"}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"question3"},"Question 3: "),r.a.createElement("input",{type:"text",name:"question3",className:"form-control"}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"question4"},"Question 4: "),r.a.createElement("input",{type:"text",name:"question4",className:"form-control"}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"question5"},"Question 5: "),r.a.createElement("input",{type:"text",name:"question5",className:"form-control"}),r.a.createElement("br",null),r.a.createElement("button",{type:"submit",className:"btn btn-dark"},e.buttonText)),r.a.createElement("br",null))}var v=n(6);function b(e){var t=Object(v.useFirestore)();return r.a.createElement("div",null,r.a.createElement(E,{formSubmissionHandler:function(n){return n.preventDefault(),e.onNewSurveyCreation(),t.collection("surveys").add({name:n.target.name.value,question1:n.target.question1.value,question2:n.target.question2.value,question3:n.target.question3.value,question4:n.target.question4.value,question5:n.target.question5.value})},buttonText:"Add New Survey"}))}function h(e){var t=e.survey,n=Object(v.useFirestore)();return r.a.createElement("div",null,r.a.createElement("h2",null," ",t.name," "),r.a.createElement("form",{onSubmit:function(a){return a.preventDefault(),e.onResponseSubmission(),n.collection("responses").add({title:t.name,response1:a.target.response1.value,response2:a.target.response2.value,response3:a.target.response3.value,response4:a.target.response4.value,response5:a.target.response5.value,surveyId:t.id})}},r.a.createElement("label",{htmlFor:"response1"},t.question1),r.a.createElement("input",{type:"text",name:"response1",className:"form-control",required:!0}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"response2"},t.question2),r.a.createElement("input",{type:"text",name:"response2",className:"form-control"}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"response3"},t.question3),r.a.createElement("input",{type:"text",name:"response3",className:"form-control"}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"response4"},t.question4),r.a.createElement("input",{type:"text",name:"response4",className:"form-control"}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"response"},t.question5),r.a.createElement("input",{type:"text",name:"response5",className:"form-control"}),r.a.createElement("br",null),r.a.createElement("button",{type:"submit",className:"btn btn-dark"},e.buttonText)))}function f(e){return r.a.createElement("div",{className:"card"},r.a.createElement("details",null,r.a.createElement("summary",{className:"survey-title"},e.name),r.a.createElement("p",null,e.question1),r.a.createElement("p",null,e.question2),r.a.createElement("p",null,e.question3),r.a.createElement("p",null,e.question4),r.a.createElement("p",null,e.question5)),r.a.createElement("button",{onClick:function(){return e.whenSurveyClicked(e.id)},className:"btn btn-dark"},"Details"))}var g=n(23);function y(e){Object(v.useFirestoreConnect)([{collection:"surveys"}]);var t=Object(g.c)((function(e){return e.firestore.ordered.surveys}));return Object(v.isLoaded)(t)?r.a.createElement("div",null,t.map((function(t){return r.a.createElement(f,{whenSurveyClicked:e.onSurveySelection,name:t.name,question1:t.question1,question2:t.question2,question3:t.question3,question4:t.question4,question5:t.question5,id:t.id,key:t.id})}))):r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Loading..."))}function S(e){var t=e.onResponseDelete;return r.a.createElement("div",{className:"card"},r.a.createElement("p",null,"Response 1: ",e.response1),r.a.createElement("p",null,"Response 2: ",e.response2),r.a.createElement("p",null,"Response 3: ",e.response3),r.a.createElement("p",null,"Response 4: ",e.response4),r.a.createElement("p",null,"Response 5: ",e.response5),r.a.createElement("button",{onClick:function(){return t(e.id)},className:"btn btn-dark"},"Delete Response"))}n(212);function R(e){var t=e.survey,n=e.onClickRespond,a=e.onClickDelete,s=e.auth;Object(v.useFirestoreConnect)([{collection:"responses"}]);var l,o,i=Object(g.c)((function(e){return e.firestore.ordered.responses})),u=null,c=null;(c=Object(v.isLoaded)(s)&&null!==s.currentUser?r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return n(t.id)},className:"btn btn-dark"},"Respond to Survey"),r.a.createElement("button",{onClick:function(){return a(t.id)},className:"btn btn-dark"},"Delete Survey")):r.a.createElement("h2",null,"Sign in to respond to survey"),Object(v.isLoaded)(i))?u=(l=i,o=t.id,l.filter((function(e){return e.surveyId===o}))).map((function(t){return r.a.createElement(S,{title:t.title,response1:t.response1,response2:t.response2,response3:t.response3,response4:t.response4,response5:t.response5,id:t.id,key:t.id,onResponseDelete:e.onResponseDelete})})):u=r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Loading..."));return r.a.createElement("div",null,r.a.createElement("h2",null,t.name),r.a.createElement("p",null,t.question1),r.a.createElement("p",null,t.question2),r.a.createElement("p",null,t.question3),r.a.createElement("p",null,t.question4),r.a.createElement("p",null,t.question5),c,r.a.createElement("br",null),u)}function q(){return r.a.createElement("div",null,r.a.createElement(E,null))}var I=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleRespondToSurvey=function(){a.setState({responding:!0})},a.handleClick=function(){null!=a.state.selectedSurvey?a.setState({selectedSurvey:null,editing:!1,responding:!1}):(0,a.props.dispatch)({type:"TOGGLE_FORM"})},a.handleAddSurvey=function(){(0,a.props.dispatch)({type:"TOGGLE_FORM"})},a.handleDeletingSurvey=function(e){a.props.firestore.delete({collection:"surveys",doc:e}),a.handleDeletingAllResponses(e),a.setState({selectedSurvey:null})},a.handleDeletingSingleResponse=function(e){a.props.firestore.delete({collection:"responses",doc:e})},a.handleDeletingAllResponses=function(e){a.props.firestore.collection("responses").where("surveyId","==",e).get().then((function(e){e.forEach((function(e){a.handleDeletingSingleResponse(e.id)}))}))},a.handleChangingSurvey=function(e){a.props.firestore.get({collection:"surveys",doc:e}).then((function(e){var t={name:e.get("name"),question1:e.get("question1"),question2:e.get("question2"),question3:e.get("question3"),question4:e.get("question4"),question5:e.get("question5"),id:e.id};a.setState({selectedSurvey:t})}))},a.handleAddResponse=function(){a.setState({responding:!1})},a.state={selectedSurvey:null,selectedSurveyResponse:null,editing:!1,responding:!1},a}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.firebase.auth(),t=null,n=null;return Object(v.isLoaded)(e)?(Object(v.isLoaded)(e)&&null==e.currentUser&&(t=r.a.createElement(y,{surveyList:this.props.mainSurveyList,onSurveySelection:this.handleChangingSurvey}),n="Add Survey"),this.props.formVisible?(t=r.a.createElement(b,{onNewSurveyCreation:this.handleAddSurvey,onResponseSubmission:this.handleAddResponse}),n="Return to List"):this.state.responding?(t=r.a.createElement(h,{survey:this.state.selectedSurvey,onResponseSubmission:this.handleAddResponse,buttonText:"Respond"}),n="Return To List"):this.state.editing?(t=r.a.createElement(q,null),n="Return To List"):null!=this.state.selectedSurvey?(t=r.a.createElement(R,{auth:e,survey:this.state.selectedSurvey,onClickRespond:this.handleRespondToSurvey,responseList:this.props.mainResponseList,onClickDelete:this.handleDeletingSurvey,onResponseDelete:this.handleDeletingSingleResponse}),n="Return to List"):(t=r.a.createElement(y,{surveyList:this.props.mainSurveyList,onSurveySelection:this.handleChangingSurvey}),n="Add Survey"),r.a.createElement("div",null,t,r.a.createElement("button",{onClick:this.handleClick,className:"btn btn-dark"},n))):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Loading..."))}}]),n}(r.a.Component);I=Object(g.b)((function(e){return{mainSurveyList:e.mainSurveyList,formVisible:e.formVisible,mainResponseList:e.mainResponseList}}))(I);var O=Object(v.withFirestore)(I),A=n(5),_=n(95),C=n.n(_),L=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleLogIn=function(){a.setState({loggedIn:!0})},a.handleLogOut=function(){a.setState({loggedIn:!1})},a.doSignUp=function(e){e.preventDefault();var t=e.target.email.value,n=e.target.password.value;C.a.auth().createUserWithEmailAndPassword(t,n).then((function(){console.log("successfully signed up!")})).catch((function(e){console.log(e.message)}))},a.doSignIn=function(e){e.preventDefault();var t=e.target.signInEmail.value,n=e.target.signInPassword.value;C.a.auth().signInWithEmailAndPassword(t,n).then((function(){console.log("Successfully signed in!")})).catch((function(e){console.log(e.message)})),a.setState({loggedIn:!0})},a.doSignOut=function(e){e.preventDefault(),C.a.auth().signOut().then((function(){console.log("Successfully signed out!")})).catch((function(e){console.log(e.message)})),a.setState({loggedIn:!1})},a.state={loggedIn:!1},a}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.firebase.auth(),t=null;return t=Object(v.isLoaded)(e)&&null===e.currentUser?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Sign Up"),r.a.createElement("form",{onSubmit:this.doSignUp},r.a.createElement("input",{type:"text",name:"email",placeholder:"email",className:"form-control"}),r.a.createElement("br",null),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",className:"form-control"}),r.a.createElement("br",null),r.a.createElement("button",{type:"submit",className:"btn btn-dark"},"Sign up")),r.a.createElement("h1",null,"Sign In"),r.a.createElement("form",{onSubmit:this.doSignIn},r.a.createElement("input",{type:"text",name:"signInEmail",placeholder:"email",className:"form-control"}),r.a.createElement("br",null),r.a.createElement("input",{type:"password",name:"signInPassword",placeholder:"Password",className:"form-control"}),r.a.createElement("br",null),r.a.createElement("button",{type:"submit",className:"btn btn-dark"},"Sign In"))):Object(v.isLoaded)(e)&&null!=e.currentUser?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:this.doSignOut,className:"btn btn-dark"},"Sign out")):r.a.createElement("p",null,"Loading..."),r.a.createElement(r.a.Fragment,null,t)}}]),n}(r.a.Component);L=Object(g.b)((function(e){return{mainSurveyList:e.mainSurveyList,formVisible:e.formVisible,mainResponseList:e.mainResponseList}}))(L);var F=Object(v.withFirestore)(L);var N=function(){return r.a.createElement(m.a,null,r.a.createElement(d,null),r.a.createElement("div",{className:"App container"},r.a.createElement(A.c,null,r.a.createElement(A.a,{path:"/signIn"},r.a.createElement(F,null)),r.a.createElement(A.a,{path:"/"},r.a.createElement(O,null)))))},j=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,449)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,l=t.getTTFB;n(e),a(e),r(e),s(e),l(e)}))},k=n(94),D=n(92),P=n(48),T=n(93),w=Object(k.a)({mainResponseList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.title,a=t.response1,r=t.response2,s=t.response3,l=t.response4,o=t.response5,i=t.surveyId,u=t.id;switch(t.type){case"ADD_RESPONSE":return Object.assign({},e,Object(P.a)({},u,{title:n,response1:a,response2:r,response3:s,response4:l,response5:o,surveyId:i,id:u}));case"DELETE_RESPONSE":var c=Object(D.a)({},e);return delete c[u],c;default:return e}},formVisible:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_FORM":return!e;default:return e}},mainSurveyList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.name,a=t.question1,r=t.question2,s=t.question3,l=t.question4,o=t.question5,i=t.id;switch(t.type){case"ADD_SURVEY":return Object.assign({},e,Object(P.a)({},i,{name:n,question1:a,question2:r,question3:s,question4:l,question5:o,id:i}));case"DELETE_SURVEY":var u=Object(D.a)({},e);return delete u[i],u;default:return e}},firestore:T.firestoreReducer}),x=n(96),U=n.n(x),B=(n(436),{apiKey:"AIzaSyC_rGako81Py76YUl_PyWMaQ32Tl-aruEI",authDomain:"survey-16010.firebaseapp.com",databaseURL:"https://survey-16010.firebaseio.com",projectId:"survey-16010",storageBucket:"survey-16010.appspot.com",messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"/firestore-survey",REACT_APP_FIREBASE_API_KEY:"AIzaSyC_rGako81Py76YUl_PyWMaQ32Tl-aruEI",REACT_APP_FIREBASE_APP_ID:"1:507461098286:web:61a928455e3a85fa3078bf",REACT_APP_FIREBASE_AUTH_DOMAIN:"survey-16010.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://survey-16010.firebaseio.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"507461098286",REACT_APP_FIREBASE_PROJECT_ID:"survey-16010",REACT_APP_FIREBASE_STORAGE_BUCKET:"survey-16010.appspot.com"}).REACT_APP_FIREBASE_SENDER_ID,appId:"1:507461098286:web:61a928455e3a85fa3078bf"});U.a.initializeApp(B),U.a.firestore();var G=U.a,V=(n(437),Object(k.b)(w)),M={firebase:G,config:{userProfile:"users",useFirestoreForProfile:!0},dispatch:V.dispatch,createFirestoreInstance:T.createFirestoreInstance};l.a.render(r.a.createElement(g.a,{store:V},r.a.createElement(v.ReactReduxFirebaseProvider,M,r.a.createElement(N,null))),document.getElementById("root")),j()}},[[234,1,2]]]);
//# sourceMappingURL=main.c512195f.chunk.js.map